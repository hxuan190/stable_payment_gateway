# ========================================
# Environment Configuration
# ========================================
# Environment: development, staging, production
ENV=development

# ========================================
# API Server Configuration
# ========================================
API_PORT=8080
API_HOST=0.0.0.0
API_RATE_LIMIT=100
API_READ_TIMEOUT=30
API_WRITE_TIMEOUT=30
# Comma-separated list of allowed origins for CORS
API_ALLOW_ORIGINS=http://localhost:3000,http://localhost:3001

# ========================================
# Database Configuration (PostgreSQL)
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_secure_password_here
DB_NAME=payment_gateway
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5
# SSL Mode: disable, require, verify-ca, verify-full
# IMPORTANT: Use 'require' or higher in production!
DB_SSL_MODE=disable

# ========================================
# Redis Configuration
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ========================================
# Solana Blockchain Configuration
# ========================================
# RPC URL - Use Helius or QuickNode for production
# Free tier: https://api.devnet.solana.com
# Paid tier example: https://mainnet.helius-rpc.com/?api-key=YOUR_KEY
SOLANA_RPC_URL=https://api.devnet.solana.com

# WebSocket URL for real-time transaction monitoring
# If not specified, will auto-derive from RPC URL (https:// → wss://)
# For specialized RPC providers with separate WebSocket endpoints:
# Example: wss://ws.eu.fluxrpc.com
SOLANA_WS_URL=

# Wallet Configuration
# ⚠️ CRITICAL: NEVER commit private keys to git! Use environment variables or secret manager
SOLANA_WALLET_PRIVATE_KEY=your_base58_encoded_private_key_here
SOLANA_WALLET_ADDRESS=your_solana_wallet_public_address_here

# Network: mainnet, testnet, devnet
SOLANA_NETWORK=devnet

# Confirmation Level: finalized (recommended), confirmed
SOLANA_CONFIRMATION_LEVEL=finalized

# SPL Token Mint Addresses
# USDT mainnet: Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB
# USDC mainnet: EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v
SOLANA_USDT_MINT=Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB
SOLANA_USDC_MINT=EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v

# ========================================
# BSC (Binance Smart Chain) Configuration
# ========================================
# RPC URL
# Testnet: https://data-seed-prebsc-1-s1.binance.org:8545
# Mainnet: https://bsc-dataseed.binance.org
BSC_RPC_URL=https://data-seed-prebsc-1-s1.binance.org:8545

# Wallet Configuration
# ⚠️ CRITICAL: NEVER commit private keys to git!
BSC_WALLET_PRIVATE_KEY=your_bsc_private_key_here
BSC_WALLET_ADDRESS=your_bsc_wallet_address_here

# Network: mainnet, testnet
BSC_NETWORK=testnet

# Chain ID: 56 (mainnet), 97 (testnet)
BSC_CHAIN_ID=97

# BEP20 Token Contract Addresses
# USDT mainnet: 0x55d398326f99059fF775485246999027B3197955
# BUSD mainnet: 0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56
BSC_USDT_CONTRACT=
BSC_BUSD_CONTRACT=

# ========================================
# Exchange Rate API Configuration
# ========================================
# Primary API: CoinGecko
EXCHANGE_RATE_PRIMARY_API=https://api.coingecko.com/api/v3

# Secondary API: Binance (fallback)
EXCHANGE_RATE_SECONDARY_API=https://api.binance.com/api/v3

# Cache TTL in seconds (default: 5 minutes)
EXCHANGE_RATE_CACHE_TTL=300

# API timeout in seconds
EXCHANGE_RATE_TIMEOUT=10

# ========================================
# Security Configuration
# ========================================
# JWT Secret - Generate with: openssl rand -base64 32
# ⚠️ CRITICAL: Use a strong, random secret in production!
JWT_SECRET=your_jwt_secret_key_here_min_32_chars

# JWT token expiration in hours
JWT_EXPIRATION_HOURS=24

# API key length for merchants
API_KEY_LENGTH=32

# Webhook signing key - Generate with: openssl rand -base64 32
# ⚠️ CRITICAL: Keep this secret and rotate periodically
WEBHOOK_SIGNING_KEY=your_webhook_signing_key_here

# Password policy
PASSWORD_MIN_LENGTH=8
MAX_LOGIN_ATTEMPTS=5

# Rate limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=100

# ========================================
# Compliance & AML Configuration (MVP v1.1)
# ========================================
# TRM Labs API Configuration
# Sign up at: https://www.trmlabs.com
# Sandbox URL: https://api.trmlabs.com/public/v1
# Production URL: https://api.trmlabs.com/public/v1
TRM_LABS_API_KEY=your_trm_labs_api_key_here
TRM_LABS_BASE_URL=https://api.trmlabs.com/public/v1
TRM_LABS_TIMEOUT=30

# AML screening configuration
# Enable/disable AML screening for all transactions
AML_SCREENING_ENABLED=true

# Minimum transaction amount (USD) requiring AML screening
# Set to 0 to screen all transactions
AML_SCREENING_MIN_AMOUNT_USD=1000

# Risk score threshold (0-100)
# Transactions with risk score >= threshold will be flagged for review
AML_RISK_SCORE_THRESHOLD=70

# Automatically reject sanctioned addresses
AML_AUTO_REJECT_SANCTIONED=true

# Travel Rule Configuration (FATF Recommendation 16)
# Minimum transaction amount (USD) requiring Travel Rule data collection
TRAVEL_RULE_THRESHOLD_USD=1000

# ========================================
# Email Configuration
# ========================================
# Provider: smtp, sendgrid, ses
EMAIL_PROVIDER=smtp

# SendGrid API Key (if using SendGrid)
EMAIL_API_KEY=

# Email sender details
EMAIL_FROM_EMAIL=noreply@payment-gateway.vn
EMAIL_FROM_NAME=Payment Gateway

# SMTP Configuration (if using SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here

# ========================================
# File Storage Configuration
# ========================================
# Provider: local, s3, minio
STORAGE_PROVIDER=local

# S3/MinIO Configuration
STORAGE_BUCKET=kyc-documents
STORAGE_REGION=us-east-1
STORAGE_ACCESS_KEY_ID=
STORAGE_SECRET_ACCESS_KEY=

# MinIO endpoint (if using MinIO)
STORAGE_ENDPOINT=http://localhost:9000

# Base URL for file access
STORAGE_BASE_URL=/uploads

# ========================================
# Operational Limits
# ========================================
# Maximum transaction amount in VND
MAX_TRANSACTION_AMOUNT_VND=10000000

# Minimum payout amount in VND
MIN_PAYOUT_AMOUNT_VND=1000000

# Hot wallet alert thresholds (in USD)
HOT_WALLET_MIN_BALANCE=1000
HOT_WALLET_MAX_BALANCE=10000

# Payment expiration time in minutes
PAYMENT_EXPIRATION_MINUTES=30

# ========================================
# Monitoring & Logging
# ========================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Enable request logging
ENABLE_REQUEST_LOGGING=true

# ========================================
# Development/Testing Only
# ========================================
# Enable debug mode (verbose logging, detailed errors)
DEBUG=false

# Enable test mode (use test data, skip certain validations)
TEST_MODE=false

# ========================================
# IMPORTANT SECURITY NOTES
# ========================================
# 1. NEVER commit this file with real values to git
# 2. Use a secrets manager (AWS Secrets Manager, HashiCorp Vault) in production
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. Use different credentials for each environment
# 5. Enable SSL/TLS for all external connections in production
# 6. Keep hot wallet balance minimal (< $10,000 USD)
# 7. Monitor and alert on all authentication failures
# 8. Regular security audits and penetration testing
